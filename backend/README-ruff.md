# Ruff –¥–ª—è Django –ø—Ä–æ–µ–∫—Ç–∞ üöÄ

–ë—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä Python –∫–æ–¥–∞, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–ª—è —ç—Ç–æ–≥–æ Django –ø—Ä–æ–µ–∫—Ç–∞.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞
pip install ruff

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
make lint

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
make lint-fix

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make format

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
make check
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **–î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏**: 79 —Å–∏–º–≤–æ–ª–æ–≤
- **–ö–∞–≤—ã—á–∫–∏**: –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–æ–∫, –¥–≤–æ–π–Ω—ã–µ –¥–ª—è docstring
- **–ò–º–ø–æ—Ä—Ç—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- **–û—Ç—Å—Ç—É–ø—ã**: 4 –ø—Ä–æ–±–µ–ª–∞

## –ö–æ–º–∞–Ω–¥—ã Make

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `make lint` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ |
| `make lint-fix` | –ü—Ä–æ–≤–µ—Ä–∫–∞ + –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ |
| `make format` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ |
| `make format-check` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è |
| `make check` | –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |

## –ö–æ–º–∞–Ω–¥—ã Ruff

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
ruff check .                    # –ü—Ä–æ–≤–µ—Ä–∫–∞
ruff check --fix .             # –ü—Ä–æ–≤–µ—Ä–∫–∞ + –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
ruff format .                  # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
ruff format --diff .           # –ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

# –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
ruff check config/settings.py
ruff format recipes/models.py
```

## –°–∫—Ä–∏–ø—Ç—ã

```bash
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
./scripts/lint.sh --help       # –°–ø—Ä–∞–≤–∫–∞
./scripts/lint.sh              # –ü—Ä–æ–≤–µ—Ä–∫–∞
./scripts/lint.sh --fix        # –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
./scripts/lint.sh --format     # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git hooks
./scripts/setup-hooks.sh
```

## VS Code –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ **Ruff** —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `.vscode/settings.json`:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤

## Git Hooks

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `./scripts/setup-hooks.sh`:
- **pre-commit**: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- **pre-push**: –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ push
- **commit-msg**: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–∞

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `ruff.toml`:
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π Django
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è settings.py
- –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–µ—Ä–≤—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

## –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª

```python
# –î–ª—è –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
long_line_code()  # noqa: E501

# –î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ Ruff
unused_import  # ruff: noqa: F401

# –î–ª—è –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª
some_code()  # noqa
```

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –í–µ—Ä—Å–∏—è
ruff --version

# –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
ruff rule E501

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
ruff check --statistics .

# –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ruff check --show-settings
```

## –ü—Ä–∏–º–µ—Ä workflow

```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
make lint-fix && make format

# –ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
make check

# –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
ruff check recipes/views.py --fix
```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
```bash
pip install --upgrade ruff
```

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∫–∞–≤—ã—á–µ–∫:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ `ruff.toml` —É–∂–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è

**–î–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- –†–∞–∑–±–∏–≤–∞–π—Ç–µ –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º—ã —Å –∏–º–ø–æ—Ä—Ç–∞–º–∏:**
- Ruff –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ –≥—Ä—É–ø–ø–∞–º
- Django –∏–º–ø–æ—Ä—Ç—ã –≤ —Å–µ–∫—Ü–∏–∏ third-party

---

üìö **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [docs/ruff-setup.md](docs/ruff-setup.md)

üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: [ruff.toml](ruff.toml)

‚ö° **–°–∫–æ—Ä–æ—Å—Ç—å**: Ruff –≤ 10-100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö –ª–∏–Ω—Ç–µ—Ä–æ–≤!
